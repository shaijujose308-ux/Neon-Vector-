<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Vector | Cyber-Arcade</title>
    <style>
        :root {
            --neon-cyan: #00f2ff;
            --neon-pink: #ff007a;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #020205;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff; user-select: none; touch-action: none;
        }

        canvas { display: block; }

        .glass {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        #ui-header {
            position: absolute; top: 20px; left: 20px; right: 20px;
            display: flex; justify-content: space-between;
            pointer-events: none; z-index: 40;
        }

        .stat-box { padding: 12px 20px; min-width: 100px; }
        .label { font-size: 10px; color: var(--neon-cyan); text-transform: uppercase; font-weight: bold; letter-spacing: 2px; }
        .value { font-size: 20px; font-weight: 800; display: block; font-family: monospace; }

        .overlay {
            position: absolute; inset: 0;
            background: radial-gradient(circle at center, rgba(10, 10, 25, 0.9) 0%, rgba(2, 2, 5, 0.98) 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; text-align: center; padding: 20px;
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 4rem); margin: 0;
            color: #fff; text-shadow: 0 0 15px var(--neon-cyan);
            letter-spacing: 4px; font-weight: 900;
        }

        .diff-container { display: flex; gap: 10px; margin: 25px 0; }

        .diff-btn {
            padding: 10px 18px; background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border); color: #888;
            cursor: pointer; border-radius: 6px; font-weight: bold;
            transition: 0.3s ease; font-size: 12px;
        }

        .diff-btn.active[data-diff="zen"] { border-color: #4ade80; color: #4ade80; box-shadow: 0 0 15px rgba(74, 222, 128, 0.2); }
        .diff-btn.active[data-diff="std"] { border-color: var(--neon-cyan); color: var(--neon-cyan); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2); }
        .diff-btn.active[data-diff="hard"] { border-color: var(--neon-pink); color: var(--neon-pink); box-shadow: 0 0 15px rgba(255, 0, 122, 0.2); }

        .start-btn {
            margin-top: 10px; padding: 16px 50px;
            background: transparent; border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan); font-size: 18px; font-weight: 800;
            cursor: pointer; text-transform: uppercase; letter-spacing: 4px;
            border-radius: 4px; transition: 0.3s;
        }

        .start-btn:hover { background: var(--neon-cyan); color: #000; box-shadow: 0 0 30px var(--neon-cyan); }

        #joystick {
            position: absolute; bottom: 60px; left: 60px;
            width: 100px; height: 100px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(0, 242, 255, 0.2);
            border-radius: 50%; display: none; z-index: 50;
        }
        #knob {
            position: absolute; top: 50%; left: 50%;
            width: 40px; height: 40px; background: var(--neon-cyan);
            border-radius: 50%; transform: translate(-50%, -50%);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="ui-header">
        <div class="stat-box glass">
            <span class="label">Score</span>
            <span id="score-val" class="value">000000</span>
        </div>
        <div class="stat-box glass" style="text-align: right;">
            <span class="label">Record</span>
            <span id="high-score-val" class="value">000000</span>
        </div>
    </div>

    <div id="menu-start" class="overlay">
        <h1>NEON VECTOR</h1>
        <div class="diff-container">
            <button class="diff-btn" data-diff="zen">ZEN</button>
            <button class="diff-btn active" data-diff="std">STANDARD</button>
            <button class="diff-btn" data-diff="hard">NIGHTMARE</button>
        </div>
        <div class="glass" style="padding: 15px; max-width: 280px; margin-bottom: 25px; font-size: 13px; color: #ccc;">
            <span id="diff-desc">Balanced gameplay. Standard hazards.</span>
        </div>
        <button id="btn-start" class="start-btn">Initialize</button>
    </div>

    <div id="menu-over" class="overlay hidden">
        <h1 style="text-shadow: 0 0 20px var(--neon-pink);">BREACHED</h1>
        <div id="final-score" style="font-size: 32px; margin: 20px 0; font-family: monospace;">000000</div>
        <button id="btn-restart" class="start-btn" style="border-color: var(--neon-pink); color: var(--neon-pink);">Reboot</button>
    </div>

    <div id="joystick"><div id="knob"></div></div>

    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score-val');
        const highEl = document.getElementById('high-score-val');
        const startMenu = document.getElementById('menu-start');
        const overMenu = document.getElementById('menu-over');
        const diffBtns = document.querySelectorAll('.diff-btn');
        const diffDesc = document.getElementById('diff-desc');
        const joystick = document.getElementById('joystick');
        const knob = document.getElementById('knob');

        let width, height, score = 0, gameActive = false, frame = 0, shake = 0;
        let enemies = [], particles = [], collectibles = [], player = { x: 0, y: 0, targetX: 0, targetY: 0, trail: [] };
        let currentDiff = 'std';
        let isTouch = false, joyX = 0, joyY = 0;

        const config = {
            zen: { speed: 0.6, rate: 0.015, points: 50, desc: "Relaxed: Slower hazards. Casual navigation." },
            std: { speed: 1.0, rate: 0.03, points: 100, desc: "Standard: Balanced speed and spawn rates." },
            hard: { speed: 1.6, rate: 0.06, points: 250, desc: "Nightmare: Elite pilot skills required." }
        };

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            if(!gameActive) { player.x = width/2; player.y = height/2; }
        }

        window.addEventListener('resize', resize);
        resize();

        highEl.innerText = String(localStorage.getItem('neon_v_high') || 0).padStart(6, '0');

        diffBtns.forEach(btn => {
            btn.onclick = () => {
                diffBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentDiff = btn.dataset.diff;
                diffDesc.innerText = config[currentDiff].desc;
            };
        });

        window.addEventListener('mousemove', (e) => { if(!isTouch) { player.targetX = e.clientX; player.targetY = e.clientY; } });

        window.addEventListener('touchstart', () => { isTouch = true; joystick.style.display = 'block'; }, {passive: false});

        joystick.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const r = joystick.getBoundingClientRect();
            const cx = r.left + r.width/2, cy = r.top + r.height/2;
            let dx = touch.clientX - cx, dy = touch.clientY - cy;
            const dist = Math.sqrt(dx*dx + dy*dy), max = 40;
            if(dist > max) { dx *= max/dist; dy *= max/dist; }
            knob.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px))`;
            joyX = dx/max; joyY = dy/max;
        }, {passive: false});

        joystick.addEventListener('touchend', () => { knob.style.transform = `translate(-50%, -50%)`; joyX = 0; joyY = 0; });

        function spawnEnemy() {
            const side = Math.floor(Math.random() * 4);
            let x, y;
            if(side === 0) { x = Math.random() * width; y = -30; }
            else if(side === 1) { x = width + 30; y = Math.random() * height; }
            else if(side === 2) { x = Math.random() * width; y = height + 30; }
            else { x = -30; y = Math.random() * height; }
            const angle = Math.atan2(player.y - y, player.x - x);
            const s = (2 + Math.random() * 2 + (score/2000)) * config[currentDiff].speed;
            enemies.push({ x, y, vx: Math.cos(angle)*s, vy: Math.sin(angle)*s });
        }

        function spawnBonus() { collectibles = [{ x: 50 + Math.random()*(width-100), y: 50 + Math.random()*(height-100) }]; }

        function explode(x, y, color) {
            for(let i=0; i<12; i++) particles.push({ x, y, vx: (Math.random()-0.5)*8, vy: (Math.random()-0.5)*8, life: 1, color });
        }

        function startGame() {
            score = 0; frame = 0; enemies = []; particles = []; player.trail = [];
            scoreEl.innerText = "000000"; spawnBonus(); gameActive = true;
            startMenu.classList.add('hidden'); overMenu.classList.add('hidden'); loop();
        }

        function endGame() {
            gameActive = false; shake = 15; explode(player.x, player.y, '#ff007a');
            const high = localStorage.getItem('neon_v_high') || 0;
            if(score > high) { localStorage.setItem('neon_v_high', score); highEl.innerText = String(score).padStart(6, '0'); }
            document.getElementById('final-score').innerText = String(score).padStart(6, '0');
            setTimeout(() => overMenu.classList.remove('hidden'), 600);
        }

        function loop() {
            if(!gameActive && particles.length === 0) return;
            frame++;
            let sx = (Math.random()-0.5)*shake, sy = (Math.random()-0.5)*shake;
            shake *= 0.9;

            if(isTouch) { player.x += joyX * 8; player.y += joyY * 8; }
            else { player.x += (player.targetX - player.x) * 0.15; player.y += (player.targetY - player.y) * 0.15; }
            player.x = Math.max(10, Math.min(width-10, player.x));
            player.y = Math.max(10, Math.min(height-10, player.y));
            player.trail.push({x: player.x, y: player.y});
            if(player.trail.length > 10) player.trail.shift();

            if(gameActive) {
                if(Math.random() < config[currentDiff].rate + (frame/100000)) spawnEnemy();
                for(let i=enemies.length-1; i>=0; i--) {
                    const e = enemies[i]; e.x += e.vx; e.y += e.vy;
                    if(Math.hypot(e.x-player.x, e.y-player.y) < 22) { endGame(); return; }
                    if(e.x < -50 || e.x > width+50 || e.y < -50 || e.y > height+50) enemies.splice(i, 1);
                }
                const b = collectibles[0];
                if(b && Math.hypot(b.x-player.x, b.y-player.y) < 30) {
                    score += config[currentDiff].points;
                    scoreEl.innerText = String(score).padStart(6, '0');
                    shake = 6; explode(b.x, b.y, '#00f2ff'); spawnBonus();
                }
            }

            for(let i=particles.length-1; i>=0; i--) {
                const p = particles[i]; p.x += p.vx; p.y += p.vy; p.life -= 0.02;
                if(p.life <= 0) particles.splice(i, 1);
            }

            ctx.fillStyle = '#020205'; ctx.fillRect(0, 0, width, height);
            ctx.strokeStyle = 'rgba(0, 242, 255, 0.03)'; ctx.lineWidth = 1;
            for(let x=0; x<width; x+=50) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,height); ctx.stroke(); }
            for(let y=0; y<height; y+=50) { ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(width,y); ctx.stroke(); }

            if(player.trail.length > 1) {
                ctx.beginPath(); ctx.strokeStyle = 'rgba(0,242,255,0.2)'; ctx.lineWidth = 4;
                ctx.moveTo(player.trail[0].x+sx, player.trail[0].y+sy);
                player.trail.forEach(p => ctx.lineTo(p.x+sx, p.y+sy));
                ctx.stroke();
            }

            ctx.shadowBlur = 15; ctx.shadowColor = '#00f2ff'; ctx.fillStyle = '#00f2ff';
            ctx.beginPath(); ctx.arc(player.x+sx, player.y+sy, 10, 0, Math.PI*2); ctx.fill();

            ctx.shadowColor = '#ff007a'; ctx.fillStyle = '#ff007a';
            enemies.forEach(e => { ctx.save(); ctx.translate(e.x+sx, e.y+sy); ctx.rotate(frame*0.05); ctx.fillRect(-8, -8, 16, 16); ctx.restore(); });

            if(collectibles[0]) {
                ctx.shadowColor = '#00f2ff'; ctx.fillStyle = '#00f2ff';
                ctx.beginPath(); ctx.arc(collectibles[0].x+sx, collectibles[0].y+sy, 8 + Math.sin(frame*0.1)*3, 0, Math.PI*2); ctx.fill();
            }

            ctx.shadowBlur = 0;
            particles.forEach(p => { ctx.globalAlpha = p.life; ctx.fillStyle = p.color; ctx.fillRect(p.x+sx, p.y+sy, 2, 2); });
            ctx.globalAlpha = 1;
            requestAnimationFrame(loop);
        }

        document.getElementById('btn-start').onclick = startGame;
        document.getElementById('btn-restart').onclick = () => { overMenu.classList.add('hidden'); startMenu.classList.remove('hidden'); };
        ctx.fillStyle = '#020205'; ctx.fillRect(0,0,width,height);
    </script>
</body>
</html>

